<!DOCTYPE html>

<html data-bs-theme="dark" data-bss-forced-theme="dark" lang="en">
{% load static %}
<head>
<script src="https://code.jquery.com/jquery-3.6.0.min.js">
$(document).ready(function() {
  $(".edit-type").click(function() {
    var typeId = $(this).data("type-id");
    $("#editTypeForm" + typeId).toggle();
  });
});
</script>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport"/>
<title>dashboard</title>
<script crossorigin="anonymous" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link href="{% static 'assets/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet"/>
<link href="{% static 'assets/fonts/fontawesome-all.min.css' %}" rel="stylesheet"/>
<link href="{% static 'assets/fonts/font-awesome.min.css' %}" rel="stylesheet"/>
<link href="{% static 'assets/fonts/fontawesome5-overrides.min.css' %}" rel="stylesheet"/>
<link href="{% static 'assets/css/bs-theme-overrides.css' %}" rel="stylesheet"/>
<link href="{% static 'assets/css/Dropdown-Dark-Theme.css' %}" rel="stylesheet"/>
<link href="{% static 'assets/css/dropdown-search-bs4.css' %}" rel="stylesheet"/>
<link href="{% static 'assets/css/Features-Cards-icons.css' %}" rel="stylesheet"/>
<link href="{% static 'assets/css/styles.css' %}" rel="stylesheet"/>
<link href="{% static 'assets/css/Table-with-search-table.css' %}" rel="stylesheet"/>
<link href="{% static 'assets/css/Table-with-search.css' %}" rel="stylesheet"/>
</head>
<body>
<body>
<header id="header-23">
<div></div>
<nav class="navbar navbar-expand-md navbar-light">
<div class="container"><button class="navbar-toggler text-primary border-0" data-bs-target="#navcol-16" data-bs-toggle="collapse"><span></span></button>
<div class="row">
<div class="col">
<section></section>
</div>

</div>
<button class="btn btn-primary" type="button" onclick="goBack()">
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-return-left" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M14.5 1.5a.5.5 0 0 1 .5.5v4.8a2.5 2.5 0 0 1-2.5 2.5H2.707l3.347 3.346a.5.5 0 0 1-.708.708l-4.2-4.2a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 8.3H12.5A1.5 1.5 0 0 0 14 6.8V2a.5.5 0 0 1 .5-.5z"/>
  </svg>
  Back
</button><button class="btn btn-primary" data-bs-target="#createEntryModal" data-bs-toggle="modal" type="button">
                  Create Entry111
                </button>
                <form method="post" action="{% url 'view_types' category_id %}" novalidate>
                  {% csrf_token %}
                  <div class="modal fade" id="createEntryModal" tabindex="-1" aria-labelledby="createEntryModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="createEntryModalLabel">Create a new entry</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                          </div>
                          <div class="form-group">
                            <select class="form-select" id="whereDropdown" name="whereDropdown">
                              <option value="" disabled>Where</option>
                              <option value="categories" selected>Categories</option>
                              <option value="types">Types</option>
                              <option value="articles">Articles</option>
                            </select>
                          </div>
                          <div id="categoriesFields" style="display: none;">
                            {{ category_form.as_p }}
                          </div>
                          <div id="typesFields" style="display: none;">
                            {{ type_form.as_p }}
                          </div>
                          <div id="articlesFields" style="display: none;">
                            {{ article_form.as_p }}
                          </div>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                          <button type="submit" class="btn btn-primary">Save changes</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
                <script>
                  function showSelectedFields() {
                    var selectedValue = document.getElementById("whereDropdown").value;
                    document.getElementById("categoriesFields").style.display = (selectedValue === "categories") ? "block" : "none";
                    document.getElementById("typesFields").style.display = (selectedValue === "types") ? "block" : "none";
                    document.getElementById("articlesFields").style.display = (selectedValue === "articles") ? "block" : "none";
                  }
                
                  document.getElementById("whereDropdown").addEventListener("change", showSelectedFields);
                  document.getElementById("createEntryModal").addEventListener("show.bs.modal", showSelectedFields); // This line ensures the function is called on modal open
                </script>
<div class="collapse navbar-collapse" id="navcol-16">
<ul class="navbar-nav mx-auto">
<li class="nav-item"></li>
<li class="nav-item"></li>
<li class="nav-item"></li>
<li class="nav-item me-2"></li>
</ul>
<div></div>
</div>
</div><button class="navbar-toggler text-primary border-0" data-bs-target="#navcol-16" data-bs-toggle="collapse"><span></span></button>
<div class="row">
<div class="col">
<section></section>
</div>
</div>
</nav></header></body></body></html>

<div class="container">
<div class="row">
<div class="col-md-12">
<div class="input-group"><input aria-describedby="button-addon2" aria-label="Search" class="form-control" placeholder="Search" type="text"/><button class="btn btn-outline-secondary" id="button-addon2" type="button"><i class="fas fa-search"></i></button></div>
</div>
</div>
<div class="row">
<div class="col-lg-12">
<h4 class="text-capitalize text-start" style="margin-top: 18px;margin-bottom: 18px;">Types</h4>
</div>
<div class="w-100"></div>
<div class="col">
<div></div>
</div>
</div>
</div>
<div class="container">
  <div class="row">
    {% for type in types %}
      {% if forloop.counter0|divisibleby:3 and not forloop.first %}
        </div>
        <!-- Abstand nach jeder Reihe -->
        <div class="col-md-12" style="height: 30px;">
          <div></div>
        </div>
        <div class="row">
      {% endif %}
      <div class="col-md-4">
        <!-- Karte für den Typ -->
        <div class="card">
          <div class="card-body custom-card-body">
            <a href="{% url 'view_article' type.id  %}">
            <h5 class="card-title" id="typeName{{ type.id }}">{{ type.name }}</h5>
            </a>
            <p class="card-text"></p>
            <form method="post" action="{% url 'delete_type' type.id %}">
              {% csrf_token %}
              <button class="btn btn-danger pull-right" type="submit"><i class="fa fa-trash" style="color: #333333;"></i></button>
            </form>
            <button class="btn btn-warning pull-right edit-type" style="margin-left: 5px;margin-right: 5px;" type="button" data-type-id="{{ type.id }}"><i class="fa fa-pencil" style="color: #333333;"></i></button>
            <div id="editTypeForm{{ type.id }}" style="display:none;">
              <form method="post" action="{% url 'edit_type' type.id %}">
                {% csrf_token %}
                {% if type.category %}
                <input type="hidden" name="category_id" value="{{ type.category.id }}"> <!-- Verstecktes Feld für category_id -->
                {% else %}
                <input type="hidden" name="category_id" value=""> <!-- Verstecktes Feld für category_id -->
                {% endif %}
                <input type="text" name="name" value="{{ type.name }}"> <!-- Name des Typs -->
                <button type="submit" class="btn btn-primary">Save</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
<div aria-atomic="true" aria-live="polite" style="position: relative; z-index: 1;">
<!-- Erfolg Toast -->
<div class="toast" id="successToast" style="position: absolute; top: 0; right: 0;">
<div class="toast-header bg-success text-white">
<strong class="me-auto">Success</strong>
<button aria-label="Close" class="btn-close" data-bs-dismiss="toast" type="button"></button>
</div>
<div class="toast-body">
      Entry created successfully!
    </div>
</div>
<!-- Fehler Toast -->
<div class="toast" id="errorToast" style="position: absolute; top: 0; right: 0;">
<div class="toast-header bg-danger text-white">
<strong class="me-auto">Error</strong>
<button aria-label="Close" class="btn-close" data-bs-dismiss="toast" type="button"></button>
</div>
<div class="toast-body">
      An error occurred while creating the entry.
    </div>
</div>
</div>
<script>
  document.querySelectorAll('.btn-danger.pull-right').forEach(function(button) {
    button.addEventListener('click', function(event) {
      if (!confirm('Are you sure you want to delete this type?')) {
        // Abbrechen, wenn der Benutzer auf "Abbrechen" klickt
        event.preventDefault();
      }
    });
  });
  </script>
  
<script>
document.getElementById("whereDropdown").addEventListener("change", function() {
  var selectedValue = this.value;

  // Funktion zum Setzen des 'required'-Attributs für eine Gruppe von Feldern
  function setRequired(fields, required) {
    fields.forEach(function(field) {
      document.getElementById(field).required = false;
    });
  }

  // Alle IDs der Formularfelder, die 'required' sein können
  var categoryFields = ["id_category-name"];
  var typeFields = ["id_type-name", "id_type-category"];
  var articleFields = ["id_article-sn", "id_article-location", "id_article-used", "id_article-model"];

  // Verstecke alle Formularteile und entferne das 'required'-Attribut
  document.getElementById("categoriesFields").style.display = "none";
  // setRequired(categoryFields, false);
  document.getElementById("typesFields").style.display = "none";
  // setRequired(typeFields, false);
  document.getElementById("articlesFields").style.display = "none";
  // setRequired(articleFields, false);

  // Zeige den ausgewählten Formularteil an und setze das 'required'-Attribut
  if (selectedValue === "categories") {
    document.getElementById("categoriesFields").style.display = "block";
    // setRequired(categoryFields, false);
  } else if (selectedValue === "types") {
    document.getElementById("typesFields").style.display = "block";
    // setRequired(typeFields, false);
  } else if (selectedValue === "articles") {
    document.getElementById("articlesFields").style.display = "block";
    // setRequired(articleFields, false);
  }
});
</script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var editButtons = document.querySelectorAll('.edit-type');
    editButtons.forEach(function(button) {
      button.addEventListener('click', function() {
        var typeId = button.getAttribute('data-type-id');
        var typeNameElement = document.getElementById('typeName' + typeId);
        var editForm = document.getElementById('editTypeForm' + typeId);
        typeNameElement.style.display = 'none';
        editForm.style.display = 'block';
      });
    });
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    var editButtons = document.querySelectorAll(".edit-type");
    editButtons.forEach(function(button) {
      button.addEventListener("click", function() {
        var typeId = this.dataset.typeId;
        var editForm = document.getElementById("editTypeForm" + typeId);
        editForm.style.display = "block";
      });
    });
  });
</script>
<script>

  function goBack() {
    window.history.back();
  }
</script>
</body>
</html>